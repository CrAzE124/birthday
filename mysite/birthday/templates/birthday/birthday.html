{% extends 'layout.html' %}
{% block title %}Birthdays{% endblock %}
{% block content %}
    <div class="container">
        <form role="form" action="{% url 'birthday' %}" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="name">Name</label>
                <input class="form-control" name="name" id="name" placeholder="Event Name" />
            </div>
            <div class="form-group">
                <label for="message">Message</label>
                <textarea class="form-control" name="birthday_message" id="message" placeholder="Short Message"></textarea>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-4">
                    <div class="form-group">
                        <label for="date">Date</label>
                        <input type="date" class="form-control" name="date_0" id="date" placeholder="Date for Party" />
                    </div>
                </div>
                <div class="col-sm-12 col-md-4">
                    <div class="form-group">
                        <label for="time">Time</label>
                        <input type="datetime" class="form-control" name="date_1" id="time" placeholder="Time for Party" />
                    </div>
                </div>
                <div class="col-sm-12 col-md-4">
                    <div class="form-group">
                        <label for="duration">Duration (in hours)</label>
                        <input type="number" min="0" max="24" class="form-control" name="duration" id="duration" placeholder="Duration of the Party" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <div class="form-group">
                        <label for="venue">Venue</label>
                        <input class="form-control" name="venue" id="venue" placeholder="Venue" />
                    </div>
                </div>
                <div class="col-sm-12 col-md-6">
                    <div class="form-group">
                        <label for="refreshment">Refreshments</label>
                        <select id="refreshment" name="refreshment" class="form-control">
                            {% for opt in refreshment_choices %}
                                <option value="{{ opt.0 }}">{{ opt.1 }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <h2>Your Details</h2>

            <div class="row">
                <div class="col-sm-12 col-md-4">
                    <div class="form-group">
                        <label for="scheduler_name">Your Name</label>
                        <input class="form-control" id="scheduler_name" name="scheduler_name" placeholder="Your Name"/>
                    </div>
                </div>
                <div class="col-sm-12 col-md-4">
                    <div class="form-group">
                        <label for="scheduler_email">Your Email</label>
                        <input type="email" class="form-control" id="scheduler_email" name="scheduler_email" placeholder="Your Email Address"/>
                    </div>
                </div>
                <div class="col-sm-12 col-md-4">
                    <div class="form-group">
                        <label for="scheduler_number">Your Number</label>
                        <input type="tel" class="form-control" id="scheduler_number" name="scheduler_number" placeholder="Your Number"/>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <button type="submit" class="btn btn-block btn-success">Submit</button>  
                </div>
            </div>
        </form>
    </div>


    <div class="mt-4 container-fluid">
        <table class="table">
            <thead>
                <tr>
                    <th>Event Name</th>
                    <th>Message</th>
                    <th>Venue</th>
                    <th>Time</th>
                    <th>Duration</th>
                    <th>Refreshments</th>
                    <th>Organized By</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            {% if birthdays|length > 0 %}
                {% for b in birthdays %}
                    <tr>
                        <td>{{ b.name }}</td>
                        <td>{{ b.message }}</td>
                        <td>{{ b.venue }}</td>
                        <td>{{ b.time | date }}</td>
                        <td>{{ b.duration }} hours</td>
                        <td>{{ b.refreshment }}</td>
                        <td>
                            {{ b.scheduler_name }}
                            <br/>
                            <small>{{ b.scheduler_email }}</small>
                            <br/>
                            <small>{{ b.scheduler_number }}</small>
                        </td>
                        <td>
                            <a href="{% url 'rsvp' b.id %}">RSVP</a>
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="8">
                        <p class="text-center text-muted">No birthdays found</p>
                    </td>
                </tr>
            {% endif %}
            </tbody>
        </table>
    </div>
{% endblock %}